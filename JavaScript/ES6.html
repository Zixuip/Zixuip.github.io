<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ECMAScript 6 入门 | Zixu知识笔记</title>
    <meta name="generator" content="VuePress 1.5.2">
    
    <meta name="description" content="这是一个知识点总结，JavaScript、HTML5、CSS、Vue等">
    <link rel="preload" href="/assets/css/0.styles.34d67128.css" as="style"><link rel="preload" href="/assets/js/app.294fffad.js" as="script"><link rel="preload" href="/assets/js/2.f1532a20.js" as="script"><link rel="preload" href="/assets/js/9.658a7c7e.js" as="script"><link rel="prefetch" href="/assets/js/10.2900798d.js"><link rel="prefetch" href="/assets/js/11.1ec66009.js"><link rel="prefetch" href="/assets/js/12.b6c2d62a.js"><link rel="prefetch" href="/assets/js/13.f5881c68.js"><link rel="prefetch" href="/assets/js/14.aca440c5.js"><link rel="prefetch" href="/assets/js/3.99e5e321.js"><link rel="prefetch" href="/assets/js/4.1433da08.js"><link rel="prefetch" href="/assets/js/5.b3fe197c.js"><link rel="prefetch" href="/assets/js/6.86a087fc.js"><link rel="prefetch" href="/assets/js/7.a75e6b0f.js"><link rel="prefetch" href="/assets/js/8.e63063d9.js">
    <link rel="stylesheet" href="/assets/css/0.styles.34d67128.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Zixu知识笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/about.html" class="nav-link">
  About
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JavaScript" class="dropdown-title"><span class="title">JavaScript</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/JavaScript/JS高级.html" class="nav-link">
  JS高级
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/红皮书.html" class="nav-link">
  高级程序设计(第三版)
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/ES6.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  ES6
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/事件冒泡和捕获.html" class="nav-link">
  事件冒泡和捕获
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/事件委托.html" class="nav-link">
  事件委托
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/事件循环.html" class="nav-link">
  事件循环
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Database/MongoDB.html" class="nav-link">
  MongoDB基础
</a></li></ul></div></div><div class="nav-item"><a href="/Echarts/Echarts.html" class="nav-link">
  Echart
</a></div> <a href="https://github.com/Zixuip" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/about.html" class="nav-link">
  About
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JavaScript" class="dropdown-title"><span class="title">JavaScript</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/JavaScript/JS高级.html" class="nav-link">
  JS高级
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/红皮书.html" class="nav-link">
  高级程序设计(第三版)
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/ES6.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  ES6
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/事件冒泡和捕获.html" class="nav-link">
  事件冒泡和捕获
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/事件委托.html" class="nav-link">
  事件委托
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/事件循环.html" class="nav-link">
  事件循环
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Database/MongoDB.html" class="nav-link">
  MongoDB基础
</a></li></ul></div></div><div class="nav-item"><a href="/Echarts/Echarts.html" class="nav-link">
  Echart
</a></div> <a href="https://github.com/Zixuip" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>ECMAScript 6 入门</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JavaScript/ES6.html#_1-let和const" class="sidebar-link">1. let和const</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JavaScript/ES6.html#_1-1-let-命令" class="sidebar-link">1.1. let 命令</a></li><li class="sidebar-sub-header"><a href="/JavaScript/ES6.html#_1-2-块级作用域" class="sidebar-link">1.2. 块级作用域</a></li><li class="sidebar-sub-header"><a href="/JavaScript/ES6.html#_1-3-const命令" class="sidebar-link">1.3. const命令</a></li><li class="sidebar-sub-header"><a href="/JavaScript/ES6.html#es6声明变量的六种方法" class="sidebar-link">ES6声明变量的六种方法</a></li><li class="sidebar-sub-header"><a href="/JavaScript/ES6.html#_1-4-顶层对象的属性" class="sidebar-link">1.4. 顶层对象的属性</a></li><li class="sidebar-sub-header"><a href="/JavaScript/ES6.html#_1-5-globalthis对象" class="sidebar-link">1.5. globalThis对象</a></li></ul></li><li><a href="/JavaScript/ES6.html#_2-变量的解构赋值" class="sidebar-link">2. 变量的解构赋值</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JavaScript/ES6.html#_2-1-数组的解构赋值" class="sidebar-link">2.1. 数组的解构赋值</a></li><li class="sidebar-sub-header"><a href="/JavaScript/ES6.html#_2-2-对象的解构赋值" class="sidebar-link">2.2. 对象的解构赋值</a></li><li class="sidebar-sub-header"><a href="/JavaScript/ES6.html#_2-3-字符串的解构赋值" class="sidebar-link">2.3. 字符串的解构赋值</a></li><li class="sidebar-sub-header"><a href="/JavaScript/ES6.html#_2-4-数值和布尔值的解构赋值" class="sidebar-link">2.4. 数值和布尔值的解构赋值</a></li><li class="sidebar-sub-header"><a href="/JavaScript/ES6.html#_2-5-函数参数的解构赋值" class="sidebar-link">2.5. 函数参数的解构赋值</a></li><li class="sidebar-sub-header"><a href="/JavaScript/ES6.html#_2-6-变量的解构赋值用途" class="sidebar-link">2.6. 变量的解构赋值用途</a></li></ul></li><li><a href="/JavaScript/ES6.html#_3-字符串的扩展" class="sidebar-link">3. 字符串的扩展</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JavaScript/ES6.html#_3-1-字符的unicode表示法" class="sidebar-link">3.1. 字符的Unicode表示法</a></li><li class="sidebar-sub-header"><a href="/JavaScript/ES6.html#_3-2-模板字符串" class="sidebar-link">3.2. 模板字符串</a></li><li class="sidebar-sub-header"><a href="/JavaScript/ES6.html#_3-3-标签模板-tagged-template" class="sidebar-link">3.3. 标签模板(tagged template)</a></li></ul></li><li><a href="/JavaScript/ES6.html#_4-字符串新增的方法" class="sidebar-link">4. 字符串新增的方法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JavaScript/ES6.html#_4-1-string-fromcodepoint" class="sidebar-link">4.1. String.fromCodePoint()</a></li><li class="sidebar-sub-header"><a href="/JavaScript/ES6.html#_4-2-string-raw" class="sidebar-link">4.2. String.raw()</a></li><li class="sidebar-sub-header"><a href="/JavaScript/ES6.html#_4-3-includes-startswith-endswith" class="sidebar-link">4.3. includes(),startsWith(),endsWith()</a></li><li class="sidebar-sub-header"><a href="/JavaScript/ES6.html#_4-4-repeat" class="sidebar-link">4.4. repeat()</a></li><li class="sidebar-sub-header"><a href="/JavaScript/ES6.html#_4-5-padstart-padend" class="sidebar-link">4.5. padStart(), padEnd()</a></li><li class="sidebar-sub-header"><a href="/JavaScript/ES6.html#_4-6-trimstart-trimend" class="sidebar-link">4.6. trimStart(), trimEnd()</a></li></ul></li><li><a href="/JavaScript/ES6.html#_5-正则的扩展" class="sidebar-link">5. 正则的扩展</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JavaScript/ES6.html#_5-1-regexp构造函数" class="sidebar-link">5.1. RegExp构造函数</a></li><li class="sidebar-sub-header"><a href="/JavaScript/ES6.html#_5-2-字符串的正则方法" class="sidebar-link">5.2. 字符串的正则方法</a></li></ul></li><li><a href="/JavaScript/ES6.html#_6-数值的扩展" class="sidebar-link">6. 数值的扩展</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JavaScript/ES6.html#_6-1-二进制和八进制表示法" class="sidebar-link">6.1. 二进制和八进制表示法</a></li><li class="sidebar-sub-header"><a href="/JavaScript/ES6.html#_6-2-number-isfinite-number-isnan" class="sidebar-link">6.2. Number.isFinite(), Number.isNaN()</a></li><li class="sidebar-sub-header"><a href="/JavaScript/ES6.html#_6-3-number-parseint-number-parsefloat" class="sidebar-link">6.3. Number.parseInt(), Number.parseFloat()</a></li><li class="sidebar-sub-header"><a href="/JavaScript/ES6.html#_6-4-number-isinteger" class="sidebar-link">6.4. Number.isInteger()</a></li><li class="sidebar-sub-header"><a href="/JavaScript/ES6.html#_6-5-number-epsilon" class="sidebar-link">6.5. Number.EPSILON</a></li><li class="sidebar-sub-header"><a href="/JavaScript/ES6.html#_6-6-安全整数和-number-issafeinteger" class="sidebar-link">6.6. 安全整数和 Number.isSafeInteger()</a></li><li class="sidebar-sub-header"><a href="/JavaScript/ES6.html#_6-7-math对象的扩展" class="sidebar-link">6.7. Math对象的扩展</a></li><li class="sidebar-sub-header"><a href="/JavaScript/ES6.html#_6-7-1-math-trunc" class="sidebar-link">6.7.1. Math.trunc()</a></li><li class="sidebar-sub-header"><a href="/JavaScript/ES6.html#_6-7-2-math-sign" class="sidebar-link">6.7.2. Math.sign()</a></li><li class="sidebar-sub-header"><a href="/JavaScript/ES6.html#_6-7-3-math-cbrt" class="sidebar-link">6.7.3. Math.cbrt()</a></li><li class="sidebar-sub-header"><a href="/JavaScript/ES6.html#_6-8-指数运算符" class="sidebar-link">6.8. 指数运算符</a></li><li class="sidebar-sub-header"><a href="/JavaScript/ES6.html#_6-9-bigint-数据类型" class="sidebar-link">6.9. BigInt 数据类型</a></li></ul></li><li><a href="/JavaScript/ES6.html#_7-函数的扩展" class="sidebar-link">7. 函数的扩展</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JavaScript/ES6.html#_7-1-默认值" class="sidebar-link">7.1. 默认值</a></li><li class="sidebar-sub-header"><a href="/JavaScript/ES6.html#_7-2-rest参数" class="sidebar-link">7.2. rest参数</a></li><li class="sidebar-sub-header"><a href="/JavaScript/ES6.html#_7-3-严格模式" class="sidebar-link">7.3. 严格模式</a></li><li class="sidebar-sub-header"><a href="/JavaScript/ES6.html#_7-4-name属性" class="sidebar-link">7.4. name属性</a></li><li class="sidebar-sub-header"><a href="/JavaScript/ES6.html#_7-5-箭头函数" class="sidebar-link">7.5. 箭头函数</a></li><li class="sidebar-sub-header"><a href="/JavaScript/ES6.html#_7-6-尾调用优化" class="sidebar-link">7.6. 尾调用优化</a></li><li class="sidebar-sub-header"><a href="/JavaScript/ES6.html#_7-6-1-尾递归" class="sidebar-link">7.6.1 尾递归</a></li><li class="sidebar-sub-header"><a href="/JavaScript/ES6.html#_7-7-函数参数的尾逗号" class="sidebar-link">7.7. 函数参数的尾逗号</a></li><li class="sidebar-sub-header"><a href="/JavaScript/ES6.html#_7-8-function-prototype-tostring" class="sidebar-link">7.8. Function.prototype.toString()</a></li></ul></li><li><a href="/JavaScript/ES6.html#_8-数组的扩展" class="sidebar-link">8. 数组的扩展</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JavaScript/ES6.html#_8-1-扩展运算符" class="sidebar-link">8.1. 扩展运算符</a></li><li class="sidebar-sub-header"><a href="/JavaScript/ES6.html#_8-1-1-替代函数的apply方法" class="sidebar-link">8.1.1. 替代函数的apply方法</a></li><li class="sidebar-sub-header"><a href="/JavaScript/ES6.html#_8-1-2-扩展运算符的应用" class="sidebar-link">8.1.2. 扩展运算符的应用</a></li><li class="sidebar-sub-header"><a href="/JavaScript/ES6.html#_8-2-array-from" class="sidebar-link">8.2. Array.from()</a></li><li class="sidebar-sub-header"><a href="/JavaScript/ES6.html#_8-3-array-of" class="sidebar-link">8.3. Array.of()</a></li><li class="sidebar-sub-header"><a href="/JavaScript/ES6.html#_8-4-数组实例的copywithin" class="sidebar-link">8.4. 数组实例的copyWithin()</a></li><li class="sidebar-sub-header"><a href="/JavaScript/ES6.html#_8-5-数组实例的find-和findindex" class="sidebar-link">8.5. 数组实例的find()和findIndex()</a></li><li class="sidebar-sub-header"><a href="/JavaScript/ES6.html#_8-6-数组实例的fill" class="sidebar-link">8.6. 数组实例的fill()</a></li><li class="sidebar-sub-header"><a href="/JavaScript/ES6.html#_8-7-数组实例的entries-keys-和-values" class="sidebar-link">8.7. 数组实例的entries(), keys() 和 values()</a></li><li class="sidebar-sub-header"><a href="/JavaScript/ES6.html#_8-8-数组实例的includes" class="sidebar-link">8.8. 数组实例的includes()</a></li><li class="sidebar-sub-header"><a href="/JavaScript/ES6.html#_8-9-数组实例的flat-flatmap" class="sidebar-link">8.9. 数组实例的flat() , flatMap()</a></li><li class="sidebar-sub-header"><a href="/JavaScript/ES6.html#_8-10-数组的空位" class="sidebar-link">8.10. 数组的空位</a></li><li class="sidebar-sub-header"><a href="/JavaScript/ES6.html#_8-11-array-prototype-sort-的排序稳定性" class="sidebar-link">8.11. Array.prototype.sort()的排序稳定性</a></li></ul></li><li><a href="/JavaScript/ES6.html#_9-对象的扩展" class="sidebar-link">9. 对象的扩展</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JavaScript/ES6.html#_9-1-属性的简洁表示法" class="sidebar-link">9.1. 属性的简洁表示法</a></li><li class="sidebar-sub-header"><a href="/JavaScript/ES6.html#_9-2-属性名表达式" class="sidebar-link">9.2. 属性名表达式</a></li><li class="sidebar-sub-header"><a href="/JavaScript/ES6.html#_9-3-方法的-name-属性" class="sidebar-link">9.3. 方法的 name 属性</a></li><li class="sidebar-sub-header"><a href="/JavaScript/ES6.html#_9-4-属性的-可枚举性-和-遍历" class="sidebar-link">9.4. 属性的 可枚举性 和 遍历</a></li><li class="sidebar-sub-header"><a href="/JavaScript/ES6.html#_9-5-super-关键字" class="sidebar-link">9.5. super 关键字</a></li><li class="sidebar-sub-header"><a href="/JavaScript/ES6.html#_9-6-对象的扩展运算符" class="sidebar-link">9.6. 对象的扩展运算符</a></li><li class="sidebar-sub-header"><a href="/JavaScript/ES6.html#_9-7-null-判断运算符" class="sidebar-link">9.7. Null 判断运算符</a></li></ul></li><li><a href="/JavaScript/ES6.html#_10-对象新增的方法" class="sidebar-link">10. 对象新增的方法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JavaScript/ES6.html#_10-1-object-is" class="sidebar-link">10.1. Object.is()</a></li><li class="sidebar-sub-header"><a href="/JavaScript/ES6.html#_10-2-object-assign" class="sidebar-link">10.2. Object.assign()</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="ecmascript-6-入门"><a href="#ecmascript-6-入门" class="header-anchor">#</a> ECMAScript 6 入门</h1> <h2 id="_1-let和const"><a href="#_1-let和const" class="header-anchor">#</a> 1. let和const</h2> <h3 id="_1-1-let-命令"><a href="#_1-1-let-命令" class="header-anchor">#</a> 1.1. let 命令</h3> <blockquote><p>用法类似<code>var</code>，但是<code>let</code>只有在代码块内有效：<strong>let让声明的变量仅在作用域内有效</strong></p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//var声明</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
a<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 10</span>

<span class="token comment">//let声明</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
a<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 6</span>
</code></pre></div><blockquote><p><code>let</code>不存在变量提升，<code>var</code>会发生<strong>变量提升</strong>现象</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// var 的情况</span>
<span class="token comment">// 用var定义foo的变量提升，相当于在脚本执行前，在全局定义了一个foo但是没有赋值</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出undefined</span>
<span class="token keyword">var</span> foo <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>

<span class="token comment">// let 的情况</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>bar<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 报错ReferenceError</span>
<span class="token keyword">let</span> bar <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>暂时性死区（temporal dead zone，简称 TDZ）：可以理解为：在代码块内，使用<code>let</code>声明变量之前，该变量都是不可以用的</p></blockquote> <p><strong>注意：</strong></p> <ul><li><code>暂时性死区</code>会让<code>typeof</code>不再是一个百分之百安全的操作</li> <li><code>let</code>不允许在相同作用域内，重复声明同一个变量</li></ul> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token keyword">typeof</span> x<span class="token punctuation">;</span> <span class="token comment">// ReferenceError</span>
<span class="token keyword">let</span> x<span class="token punctuation">;</span>
</code></pre></div><blockquote><p>ES6入门解释：暂时性死区的本质就是，只要一进入当前作用域，所要使用的变量就已经存在了，但是不可获取，只有等到声明变量的那一行代码出现，才可以获取和使用该变量。</p></blockquote> <h3 id="_1-2-块级作用域"><a href="#_1-2-块级作用域" class="header-anchor">#</a> 1.2. 块级作用域</h3> <p>使用场景：</p> <ul><li>内层变量可能会覆盖外层变量</li> <li>用来计数的循环变量泄露为全局变量</li></ul> <blockquote><p>减少匿名立即赤星函数表达式（匿名IIFE）的使用</p></blockquote> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token comment">// IIFE 写法</span>
<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> tmp <span class="token operator">=</span> <span class="token operator">...</span><span class="token punctuation">;</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 块级作用域写法</span>
<span class="token punctuation">{</span>
  <span class="token keyword">let</span> tmp <span class="token operator">=</span> <span class="token operator">...</span><span class="token punctuation">;</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_1-3-const命令"><a href="#_1-3-const命令" class="header-anchor">#</a> 1.3. const命令</h3> <blockquote><p>const声明一个<strong>只读</strong>的常量：一旦声明，常量的值就不能改变</p></blockquote> <ul><li><p>作用域和let相同：只能在声明所在的块级作用域内有效</p></li> <li><p>也不存在常量提升，同样存在<code>暂时性死区</code></p></li> <li><p>也不可以重复声明</p></li></ul> <p>本质：</p> <blockquote><p>const保证的是变量指向的那个 <strong>内存地址</strong> 所保存的数据不得改动，而非变量的值不能改动</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//例子：</span>
<span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
a<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'Hello'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 可执行</span>
a<span class="token punctuation">.</span>length <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token comment">// 可执行</span>
a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'Dave'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token comment">// 报错</span>
</code></pre></div><ul><li><code>Object.freeze()</code>：可以<strong>冻结</strong>一个对象（方法的返回值是：被冻结的对象）</li></ul> <blockquote><p>一个被冻结的对象再也不能被修改；冻结了一个对象则不能向这个对象添加新的属性，不能删除已有属性，不能修改该对象已有属性的可枚举性、可配置性、可写性，以及不能修改已有属性的值。此外，冻结一个对象后该对象的原型也不能被修改。<code>freeze()</code> 返回和传入的参数相同的对象。</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//将一个对象彻底冻结的函数</span>
<span class="token keyword">var</span> <span class="token function-variable function">constantize</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  Object<span class="token punctuation">.</span><span class="token function">freeze</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
  Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span> <span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">typeof</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">'object'</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">constantize</span><span class="token punctuation">(</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="es6声明变量的六种方法"><a href="#es6声明变量的六种方法" class="header-anchor">#</a> ES6声明变量的六种方法</h3> <blockquote><ul><li>var</li> <li>function</li> <li>let</li> <li>const</li> <li>import</li> <li>class</li></ul></blockquote> <h3 id="_1-4-顶层对象的属性"><a href="#_1-4-顶层对象的属性" class="header-anchor">#</a> 1.4. 顶层对象的属性</h3> <blockquote><p><strong>顶层对象</strong>：在浏览器环境指的是<strong>window</strong>对象，在Node指的是<strong>global</strong>对象，在<code>ES5</code>之中，顶层对象的属性与全局变量是等价的</p></blockquote> <p><em>ES6规定</em>：</p> <p><code>var</code>命令和<code>function</code>命令声明的全局变量，依旧是顶层对象的属性</p> <p><code>let</code>命令、<code>const</code>命令、<code>class</code>命令声明的全局变量，不属于顶层对象的属性</p> <h3 id="_1-5-globalthis对象"><a href="#_1-5-globalthis对象" class="header-anchor">#</a> 1.5. globalThis对象</h3> <blockquote><p>JavaScript 语言存在一个顶层对象，它提供全局环境（即全局作用域），所有代码都是在这个环境中运行</p></blockquote> <ul><li>浏览器里面，顶层对象是<code>window</code>，但 Node 和 Web Worker 没有<code>window</code>。</li> <li>浏览器和 Web Worker 里面，<code>self</code>也指向顶层对象，但是 Node 没有<code>self</code>。</li> <li>Node 里面，顶层对象是<code>global</code>，但其他环境都不支持</li></ul> <p>所以一般都是用<code>this</code>变量来获取</p> <ul><li><p>全局环境中，<code>this</code>会返回顶层对象。但是，Node 模块和 ES6 模块中，<code>this</code>返回的是当前模块。</p></li> <li><p>函数里面的<code>this</code>，如果函数不是作为对象的方法运行，而是单纯作为函数运行，<code>this</code>会指向顶层对象。但是，严格模式下，这时<code>this</code>会返回<code>undefined</code>。</p></li> <li><p>不管是严格模式，还是普通模式，<code>new Function('return this')()</code>，总是会返回全局对象。</p></li> <li><p>如果浏览器用了 CSP（Content Security Policy，内容安全策略），那么<code>eval</code>、<code>new Function</code>这些方法都可能无法使用。</p></li></ul> <h2 id="_2-变量的解构赋值"><a href="#_2-变量的解构赋值" class="header-anchor">#</a> 2. 变量的解构赋值</h2> <h3 id="_2-1-数组的解构赋值"><a href="#_2-1-数组的解构赋值" class="header-anchor">#</a> 2.1. 数组的解构赋值</h3> <blockquote><p>完全解构：</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//=&gt; 解构出来，a=1,b=2,c=3</span>
<span class="token keyword">let</span> <span class="token punctuation">[</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">//如果解构不成功，变量的值等于undefined</span>
<span class="token keyword">let</span> <span class="token punctuation">[</span>foo<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>不完全解构：</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
x <span class="token comment">// 1</span>
y <span class="token comment">// 2</span>

<span class="token keyword">let</span> <span class="token punctuation">[</span>a<span class="token punctuation">,</span> <span class="token punctuation">[</span>b<span class="token punctuation">]</span><span class="token punctuation">,</span> d<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
a <span class="token comment">// 1</span>
b <span class="token comment">// 2</span>
d <span class="token comment">// 4</span>
</code></pre></div><blockquote><p>如果等号右边不是数组（或严格来说，是不可遍历的结构，参考Iterator，那么也会报错</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 报错</span>
<span class="token keyword">let</span> <span class="token punctuation">[</span>foo<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> <span class="token punctuation">[</span>foo<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> <span class="token punctuation">[</span>foo<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">NaN</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> <span class="token punctuation">[</span>foo<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> <span class="token punctuation">[</span>foo<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> <span class="token punctuation">[</span>foo<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>Set结构，也可以使用数组的解构赋值</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
x <span class="token comment">// &quot;a&quot;</span>
</code></pre></div><blockquote><p>只要某种数据结构具有 Iterator接口，都可以用数组形式的解构赋值</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">fibs</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">yield</span> a<span class="token punctuation">;</span>
    <span class="token punctuation">[</span>a<span class="token punctuation">,</span> b<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>b<span class="token punctuation">,</span> a <span class="token operator">+</span> b<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> <span class="token punctuation">[</span>first<span class="token punctuation">,</span> second<span class="token punctuation">,</span> third<span class="token punctuation">,</span> fourth<span class="token punctuation">,</span> fifth<span class="token punctuation">,</span> sixth<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">fibs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//fibs是一个 Generator 函数</span>
sixth <span class="token comment">// 5</span>
</code></pre></div><ul><li><strong>默认值</strong></li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> <span class="token punctuation">[</span>foo <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
foo <span class="token comment">// true</span>

<span class="token keyword">let</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token string">'b'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// x='a', y='b'</span>
<span class="token keyword">let</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token string">'b'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token keyword">undefined</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// x='a', y='b'</span>
</code></pre></div><blockquote><p>ES6 内部使用严格相等运算符（<code>===</code>），判断一个位置是否有值。所以，只有当一个数组成员严格等于<code>undefined</code>，默认值才会生效</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> <span class="token punctuation">[</span>x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token keyword">undefined</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
x <span class="token comment">// 1</span>

<span class="token keyword">let</span> <span class="token punctuation">[</span>x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token keyword">null</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
x <span class="token comment">// null</span>
</code></pre></div><h3 id="_2-2-对象的解构赋值"><a href="#_2-2-对象的解构赋值" class="header-anchor">#</a> 2.2. 对象的解构赋值</h3> <blockquote><p>变量必须与属性同名，才能取到正确的值</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> <span class="token punctuation">{</span> baz <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span> foo<span class="token operator">:</span> <span class="token string">'aaa'</span><span class="token punctuation">,</span> bar<span class="token operator">:</span> <span class="token string">'bbb'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
baz <span class="token comment">// undefined</span>
</code></pre></div><blockquote><p>如果变量名和属性名不一致</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//相当于，foo是序号，序号相同的进行赋值操作</span>
<span class="token keyword">let</span> <span class="token punctuation">{</span> foo<span class="token operator">:</span> baz <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span> foo<span class="token operator">:</span> <span class="token string">'aaa'</span><span class="token punctuation">,</span> bar<span class="token operator">:</span> <span class="token string">'bbb'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
baz <span class="token comment">// &quot;aaa&quot;</span>

<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> first<span class="token operator">:</span> <span class="token string">'hello'</span><span class="token punctuation">,</span> last<span class="token operator">:</span> <span class="token string">'world'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> <span class="token punctuation">{</span> first<span class="token operator">:</span> f<span class="token punctuation">,</span> last<span class="token operator">:</span> l <span class="token punctuation">}</span> <span class="token operator">=</span> obj<span class="token punctuation">;</span>
f <span class="token comment">// 'hello'</span>
l <span class="token comment">// 'world'</span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> node <span class="token operator">=</span> <span class="token punctuation">{</span>
  loc<span class="token operator">:</span> <span class="token punctuation">{</span>
    start<span class="token operator">:</span> <span class="token punctuation">{</span>
      line<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
      column<span class="token operator">:</span> <span class="token number">5</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> <span class="token punctuation">{</span> loc<span class="token punctuation">,</span> loc<span class="token operator">:</span> <span class="token punctuation">{</span> start <span class="token punctuation">}</span><span class="token punctuation">,</span> loc<span class="token operator">:</span> <span class="token punctuation">{</span> start<span class="token operator">:</span> <span class="token punctuation">{</span> line <span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token operator">=</span> node<span class="token punctuation">;</span>
line <span class="token comment">// 1</span>
loc  <span class="token comment">// Object {start: Object}</span>
start <span class="token comment">// Object {line: 1, column: 5}</span>
</code></pre></div><ul><li>设置<strong>默认值</strong>方法和条件跟数组的类似</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> <span class="token punctuation">{</span>x <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
x <span class="token comment">// 3</span>

<span class="token keyword">var</span> <span class="token punctuation">{</span>x<span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span>x<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
x <span class="token comment">// 1</span>
y <span class="token comment">// 5</span>

<span class="token keyword">var</span> <span class="token punctuation">{</span>x<span class="token operator">:</span> y <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
y <span class="token comment">// 3</span>

<span class="token keyword">var</span> <span class="token punctuation">{</span>x<span class="token operator">:</span> y <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span>x<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
y <span class="token comment">// 5</span>

<span class="token keyword">var</span> <span class="token punctuation">{</span> message<span class="token operator">:</span> msg <span class="token operator">=</span> <span class="token string">'Something went wrong'</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
msg <span class="token comment">// &quot;Something went wrong&quot;</span>
</code></pre></div><h3 id="_2-3-字符串的解构赋值"><a href="#_2-3-字符串的解构赋值" class="header-anchor">#</a> 2.3. 字符串的解构赋值</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">[</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d<span class="token punctuation">,</span> e<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'hello'</span><span class="token punctuation">;</span>
a <span class="token comment">// &quot;h&quot;</span>
b <span class="token comment">// &quot;e&quot;</span>
c <span class="token comment">// &quot;l&quot;</span>
d <span class="token comment">// &quot;l&quot;</span>
e <span class="token comment">// &quot;o&quot;</span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> <span class="token punctuation">{</span>length <span class="token operator">:</span> len<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token string">'hello'</span><span class="token punctuation">;</span>
len <span class="token comment">// 5</span>
</code></pre></div><h3 id="_2-4-数值和布尔值的解构赋值"><a href="#_2-4-数值和布尔值的解构赋值" class="header-anchor">#</a> 2.4. 数值和布尔值的解构赋值</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> <span class="token punctuation">{</span>toString<span class="token operator">:</span> s<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>
s <span class="token operator">===</span> <span class="token class-name">Number</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>toString <span class="token comment">// true</span>

<span class="token keyword">let</span> <span class="token punctuation">{</span>toString<span class="token operator">:</span> s<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
s <span class="token operator">===</span> <span class="token class-name">Boolean</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>toString <span class="token comment">// true</span>
</code></pre></div><blockquote><p>等号右边的值不是对象或数组，就先将其转为对象，由于<code>undefined</code>和<code>null</code>无法转为对象,因此会报错</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> <span class="token punctuation">{</span> prop<span class="token operator">:</span> x <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span> <span class="token comment">// TypeError</span>
<span class="token keyword">let</span> <span class="token punctuation">{</span> prop<span class="token operator">:</span> y <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// TypeError</span>
</code></pre></div><h3 id="_2-5-函数参数的解构赋值"><a href="#_2-5-函数参数的解构赋值" class="header-anchor">#</a> 2.5. 函数参数的解构赋值</h3> <p><strong>默认值</strong>：出现<code>undefined</code>就会触发</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">move</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">{</span>x<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [3, 8]</span>
<span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">{</span>x<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [3, 0]</span>
<span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [0, 0]</span>
<span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [0, 0]</span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">move</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>x<span class="token punctuation">,</span> y<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span> x<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">{</span>x<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [3, 8]</span>
<span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">{</span>x<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [3, undefined]</span>
<span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [undefined, undefined]</span>
<span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [0, 0]</span>
</code></pre></div><h3 id="_2-6-变量的解构赋值用途"><a href="#_2-6-变量的解构赋值用途" class="header-anchor">#</a> 2.6. 变量的解构赋值用途</h3> <ol><li>交换变量的值</li></ol> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> y <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>

<span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>y<span class="token punctuation">,</span> x<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><ol start="2"><li>从函数返回多个值</li></ol> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 返回一个数组</span>

<span class="token keyword">function</span> <span class="token function">example</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> <span class="token punctuation">[</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">example</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ol start="3"><li>函数参数的定义</li></ol> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 参数是一组有次序的值</span>
<span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z<span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span>
<span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 参数是一组无次序的值</span>
<span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span>
<span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">{</span>z<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> x<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ol start="4"><li>提取JSON数据</li></ol> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> jsonData <span class="token operator">=</span> <span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token number">42</span><span class="token punctuation">,</span>
  status<span class="token operator">:</span> <span class="token string">&quot;OK&quot;</span><span class="token punctuation">,</span>
  data<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">867</span><span class="token punctuation">,</span> <span class="token number">5309</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> <span class="token punctuation">{</span> id<span class="token punctuation">,</span> status<span class="token punctuation">,</span> data<span class="token operator">:</span> number <span class="token punctuation">}</span> <span class="token operator">=</span> jsonData<span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> status<span class="token punctuation">,</span> number<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 42, &quot;OK&quot;, [867, 5309]</span>
</code></pre></div><ol start="5"><li>函数参数的默认值</li></ol> <div class="language-javascript extra-class"><pre class="language-javascript"><code>jQuery<span class="token punctuation">.</span><span class="token function-variable function">ajax</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  async <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token function-variable function">beforeSend</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  cache <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token function-variable function">complete</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  crossDomain <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  global <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token comment">// ... more config</span>
<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ... do stuff</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><ol start="6"><li>遍历Map结构</li></ol> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'first'</span><span class="token punctuation">,</span> <span class="token string">'hello'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'second'</span><span class="token punctuation">,</span> <span class="token string">'world'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> <span class="token punctuation">[</span>key<span class="token punctuation">,</span> value<span class="token punctuation">]</span> <span class="token keyword">of</span> map<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>key <span class="token operator">+</span> <span class="token string">&quot; is &quot;</span> <span class="token operator">+</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// first is hello</span>
<span class="token comment">// second is world</span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 获取键名</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> <span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token keyword">of</span> map<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token comment">// 获取键值</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> <span class="token punctuation">[</span><span class="token punctuation">,</span>value<span class="token punctuation">]</span> <span class="token keyword">of</span> map<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="7"><li>输入模块的指定方法</li></ol> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> SourceMapConsumer<span class="token punctuation">,</span> SourceNode <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;source-map&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="_3-字符串的扩展"><a href="#_3-字符串的扩展" class="header-anchor">#</a> 3. 字符串的扩展</h2> <h3 id="_3-1-字符的unicode表示法"><a href="#_3-1-字符的unicode表示法" class="header-anchor">#</a> 3.1. 字符的Unicode表示法</h3> <blockquote><p>允许采用<code>\uxxxx</code>形式表示一个字符，其中<code>xxxx</code>表示字符的 Unicode 码点</p> <p>范围：<code>\u0000</code>~<code>\uFFFF</code>之间的字符</p></blockquote> <h3 id="_3-2-模板字符串"><a href="#_3-2-模板字符串" class="header-anchor">#</a> 3.2. 模板字符串</h3> <blockquote><p>模板字符串（template string）是增强版的字符串，用反引号（`）标识。</p> <p>它可以当作普通字符串使用，也可以用来定义多行字符串，或者在字符串中嵌入变量。</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">authorize</span><span class="token punctuation">(</span><span class="token parameter">user<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>user<span class="token punctuation">.</span><span class="token function">hasPrivilege</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span>
      <span class="token comment">// 传统写法为</span>
      <span class="token comment">// 'User '</span>
      <span class="token comment">// + user.name</span>
      <span class="token comment">// + ' is not authorized to do '</span>
      <span class="token comment">// + action</span>
      <span class="token comment">// + '.'</span>
      <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">User </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>user<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> is not authorized to do </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>action<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_3-3-标签模板-tagged-template"><a href="#_3-3-标签模板-tagged-template" class="header-anchor">#</a> 3.3. 标签模板(tagged template)</h3> <blockquote><p>紧跟在一个函数名后面，该函数将被调用来处理这个模板字符串</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code>alert<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">hello</span><span class="token template-punctuation string">`</span></span>
<span class="token comment">// 等同于</span>
<span class="token function">alert</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'hello'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="_4-字符串新增的方法"><a href="#_4-字符串新增的方法" class="header-anchor">#</a> 4. 字符串新增的方法</h2> <h3 id="_4-1-string-fromcodepoint"><a href="#_4-1-string-fromcodepoint" class="header-anchor">#</a> 4.1. String.fromCodePoint()</h3> <blockquote><p>ES5 提供<code>String.fromCharCode()</code>方法，用于从 Unicode 码点返回对应字符，但是这个方法不能识别码点大于<code>0xFFFF</code>的字符</p> <p>ES6 提供了<code>String.fromCodePoint()</code>方法，可以识别大于<code>0xFFFF</code>的字符，弥补了<code>String.fromCharCode()</code>方法的不足</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code>String<span class="token punctuation">.</span><span class="token function">fromCodePoint</span><span class="token punctuation">(</span><span class="token number">0x20BB7</span><span class="token punctuation">)</span>
<span class="token comment">// &quot;𠮷&quot;</span>
String<span class="token punctuation">.</span><span class="token function">fromCodePoint</span><span class="token punctuation">(</span><span class="token number">0x78</span><span class="token punctuation">,</span> <span class="token number">0x1f680</span><span class="token punctuation">,</span> <span class="token number">0x79</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'x\uD83D\uDE80y'</span>
<span class="token comment">// true</span>
</code></pre></div><h3 id="_4-2-string-raw"><a href="#_4-2-string-raw" class="header-anchor">#</a> 4.2. String.raw()</h3> <blockquote><p>给原生String对象，提供了一个<code>raw()</code>方法。</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code>String<span class="token punctuation">.</span>raw<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hi\n</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token number">2</span><span class="token operator">+</span><span class="token number">3</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!</span><span class="token template-punctuation string">`</span></span>
<span class="token comment">// 实际返回 &quot;Hi\\n5!&quot;，显示的是转义后的结果 &quot;Hi\n5!&quot;</span>

String<span class="token punctuation">.</span>raw<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hi\u000A!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token comment">// 实际返回 &quot;Hi\\u000A!&quot;，显示的是转义后的结果 &quot;Hi\u000A!&quot;</span>
</code></pre></div><blockquote><p>作为函数，<code>String.raw()</code>的代码实现基本如下</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code>String<span class="token punctuation">.</span><span class="token function-variable function">raw</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">strings<span class="token punctuation">,</span> <span class="token operator">...</span>values</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> output <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> index<span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span>index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> index <span class="token operator">&lt;</span> values<span class="token punctuation">.</span>length<span class="token punctuation">;</span> index<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    output <span class="token operator">+=</span> strings<span class="token punctuation">.</span>raw<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">+</span> values<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  output <span class="token operator">+=</span> strings<span class="token punctuation">.</span>raw<span class="token punctuation">[</span>index<span class="token punctuation">]</span>
  <span class="token keyword">return</span> output<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_4-3-includes-startswith-endswith"><a href="#_4-3-includes-startswith-endswith" class="header-anchor">#</a> 4.3. includes(),startsWith(),endsWith()</h3> <ul><li><strong>includes()</strong>：返回布尔值，表示是否找到了参数字符串。</li> <li><strong>startsWith()</strong>：返回布尔值，表示参数字符串是否在原字符串的头部。</li> <li><strong>endsWith()</strong>：返回布尔值，表示参数字符串是否在原字符串的尾部。</li></ul> <blockquote><p>三个方法都支持第二个参数：表示开始搜索的位置</p></blockquote> <h3 id="_4-4-repeat"><a href="#_4-4-repeat" class="header-anchor">#</a> 4.4. repeat()</h3> <blockquote><p>返回一个新字符串，方法表示：将原字符串重复n次</p> <ul><li><p>参数是小数，会向下取整</p></li> <li><p>参数是负数或者<code>Infinity</code>，会报错</p></li> <li><p>参数是 0 到-1 之间的小数，则等同于 0，这是因为会先进行取整运算。0 到-1 之间的小数，取整以后等于<code>-0</code>，<code>repeat</code>视同为 0</p></li> <li><p>参数NaN等同于0</p></li> <li><p>参数是字符串，则会先转换成数字</p></li></ul></blockquote> <h3 id="_4-5-padstart-padend"><a href="#_4-5-padstart-padend" class="header-anchor">#</a> 4.5. padStart(), padEnd()</h3> <blockquote><p>arg1:补齐后字符串的最大长度。arg2:用来补全的字符串</p> <p><code>padStart(arg1,arg2)</code>用于头部补全</p> <p><code>padEnd(arg1,arg2)</code>用于尾部补全</p></blockquote> <ul><li>原字符串的长度，等于或者大于最大长度，则字符串补全不会生效</li> <li>用来补全的字符串与原字符串，两者的长度之和超过了最大长度，则会截去超出位数的补全字符串</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token string">'abc'</span><span class="token punctuation">.</span><span class="token function">padStart</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">'0123456789'</span><span class="token punctuation">)</span>
<span class="token comment">// '0123456abc'</span>
</code></pre></div><ul><li>arg2参数不传，默认使用空格补全长度</li></ul> <p>常用用途：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token string">'12'</span><span class="token punctuation">.</span><span class="token function">padStart</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">'YYYY-MM-DD'</span><span class="token punctuation">)</span> <span class="token comment">// &quot;YYYY-MM-12&quot;</span>
<span class="token string">'09-12'</span><span class="token punctuation">.</span><span class="token function">padStart</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">'YYYY-MM-DD'</span><span class="token punctuation">)</span> <span class="token comment">// &quot;YYYY-09-12&quot;</span>
</code></pre></div><h3 id="_4-6-trimstart-trimend"><a href="#_4-6-trimstart-trimend" class="header-anchor">#</a> 4.6. trimStart(), trimEnd()</h3> <blockquote><p><code>trimStart()</code>消除字符串头部的空格</p> <p><code>trimEnd()</code>消除尾部的空格</p> <p>返回的都是<strong>新字符串</strong>，并且不会修改原始字符串</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> s <span class="token operator">=</span> <span class="token string">'  abc  '</span><span class="token punctuation">;</span>
s<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// &quot;abc&quot;</span>
s<span class="token punctuation">.</span><span class="token function">trimStart</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// &quot;abc  &quot;</span>
s<span class="token punctuation">.</span><span class="token function">trimEnd</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// &quot;  abc&quot;</span>
</code></pre></div><p><strong>PS</strong>：浏览器还部署了额外的两个方法，<code>trimLeft()</code>是<code>trimStart()</code>的别名，<code>trimRight()</code>是<code>trimEnd()</code>的别名。</p> <h2 id="_5-正则的扩展"><a href="#_5-正则的扩展" class="header-anchor">#</a> 5. 正则的扩展</h2> <h3 id="_5-1-regexp构造函数"><a href="#_5-1-regexp构造函数" class="header-anchor">#</a> 5.1. RegExp构造函数</h3> <blockquote><p>Es5中：<code>RegExp</code>构造函数的参数有两种情况。</p></blockquote> <ul><li>第一种情况是，参数是字符串，这时第二个参数表示正则表达式的修饰符（flag）</li></ul> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">'xyz'</span><span class="token punctuation">,</span> <span class="token string">'i'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 等价于</span>
<span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token regex">/xyz/i</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>第二种情况是，参数是一个正则表示式，这时会返回一个原有正则表达式的拷贝。</li></ul> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token regex">/xyz/i</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 等价于</span>
<span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token regex">/xyz/i</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>ES6中：<code>RegExp</code>构造函数第一个参数是一个正则对象，那么可以使用第二个参数指定修饰符</p></blockquote> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token regex">/abc/ig</span><span class="token punctuation">,</span> <span class="token string">'i'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>flags
<span class="token comment">// &quot;i&quot;</span>
</code></pre></div><h3 id="_5-2-字符串的正则方法"><a href="#_5-2-字符串的正则方法" class="header-anchor">#</a> 5.2. 字符串的正则方法</h3> <blockquote><p>可使用的正则表达式：<code>match()</code>、<code>replace()</code>、<code>search()</code>和<code>split()</code></p></blockquote> <ul><li><code>String.prototype.match</code> 调用 <code>RegExp.prototype[Symbol.match]</code></li> <li><code>String.prototype.replace</code> 调用 <code>RegExp.prototype[Symbol.replace]</code></li> <li><code>String.prototype.search</code> 调用 <code>RegExp.prototype[Symbol.search]</code></li> <li><code>String.prototype.split</code> 调用 <code>RegExp.prototype[Symbol.split]</code></li></ul> <h2 id="_6-数值的扩展"><a href="#_6-数值的扩展" class="header-anchor">#</a> 6. 数值的扩展</h2> <h3 id="_6-1-二进制和八进制表示法"><a href="#_6-1-二进制和八进制表示法" class="header-anchor">#</a> 6.1. 二进制和八进制表示法</h3> <blockquote><p>ES6 提供了二进制和八进制数值的新的写法，分别用前缀<code>0b</code>（或<code>0B</code>）和<code>0o</code>（或<code>0O</code>）表示</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token number">0b111110111</span> <span class="token operator">===</span> <span class="token number">503</span> <span class="token comment">// true</span>
<span class="token number">0o767</span> <span class="token operator">===</span> <span class="token number">503</span> <span class="token comment">// true</span>
</code></pre></div><h3 id="_6-2-number-isfinite-number-isnan"><a href="#_6-2-number-isfinite-number-isnan" class="header-anchor">#</a> 6.2. Number.isFinite(), Number.isNaN()</h3> <blockquote><p><code>Number.isFinite()</code>用来检查一个数值是否为有限的（finite），即不是<code>Infinity</code>。----【如果参数类型不是数值，一律返回false】</p> <p><code>Number.isNaN()</code>用来检查一个值是否为<code>NaN</code>。----【如果参数类型不是NaN，一律返回false】</p></blockquote> <ul><li><p>跟全局方法<code>isFinite()</code>和<code>isNaN()</code>的区别在于。【旧方法先调用Number()，将非数值的值转为数值，再进行判断】</p></li> <li><p>新方法只对数值有效</p></li></ul> <h3 id="_6-3-number-parseint-number-parsefloat"><a href="#_6-3-number-parseint-number-parsefloat" class="header-anchor">#</a> 6.3. Number.parseInt(), Number.parseFloat()</h3> <blockquote><p>跟全局方法parseInt() 和 parseFloat() 用法一致</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// ES5的写法</span>
<span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token string">'12.34'</span><span class="token punctuation">)</span> <span class="token comment">// 12</span>
<span class="token function">parseFloat</span><span class="token punctuation">(</span><span class="token string">'123.45#'</span><span class="token punctuation">)</span> <span class="token comment">// 123.45</span>

<span class="token comment">// ES6的写法</span>
Number<span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token string">'12.34'</span><span class="token punctuation">)</span> <span class="token comment">// 12</span>
Number<span class="token punctuation">.</span><span class="token function">parseFloat</span><span class="token punctuation">(</span><span class="token string">'123.45#'</span><span class="token punctuation">)</span> <span class="token comment">// 123.45</span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code>Number<span class="token punctuation">.</span>parseInt <span class="token operator">===</span> parseInt <span class="token comment">// true</span>
Number<span class="token punctuation">.</span>parseFloat <span class="token operator">===</span> parseFloat <span class="token comment">// true</span>
</code></pre></div><h3 id="_6-4-number-isinteger"><a href="#_6-4-number-isinteger" class="header-anchor">#</a> 6.4. Number.isInteger()</h3> <blockquote><p>用来判断一个数值是否为<strong>整数</strong></p></blockquote> <ul><li>整数和浮点数采用的是同样的<strong>存储方法</strong></li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code>Number<span class="token punctuation">.</span><span class="token function">isInteger</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
Number<span class="token punctuation">.</span><span class="token function">isInteger</span><span class="token punctuation">(</span><span class="token number">25.0</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
</code></pre></div><ul><li>参数不是数值，返回<code>false</code></li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code>Number<span class="token punctuation">.</span><span class="token function">isInteger</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
Number<span class="token punctuation">.</span><span class="token function">isInteger</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
Number<span class="token punctuation">.</span><span class="token function">isInteger</span><span class="token punctuation">(</span><span class="token string">'15'</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
Number<span class="token punctuation">.</span><span class="token function">isInteger</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
</code></pre></div><ul><li><strong>注意</strong>： 对数据精度要求较高的，不要使用该方法来判断一个数值是否为整数</li></ul> <blockquote><p>理由：如果一个数值的绝对值小于<code>Number.MIN_VALUE</code>（5E-324），即小于 JavaScript 能够分辨的最小值，会被自动转为 0。这时，<code>Number.isInteger</code>也会误判。</p></blockquote> <h3 id="_6-5-number-epsilon"><a href="#_6-5-number-epsilon" class="header-anchor">#</a> 6.5. Number.EPSILON</h3> <blockquote><p>新增的一个极小常量，用来表示1与大于1的最小浮点数之间的差</p></blockquote> <ul><li>对于 64 位浮点数来说，大于 1 的最小浮点数相当于二进制的<code>1.00..001</code>，小数点后面有连续 51 个零。这个值减去 1 之后，就等于 2 的 -52 次方</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code>Number<span class="token punctuation">.</span><span class="token constant">EPSILON</span> <span class="token operator">===</span> Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">52</span><span class="token punctuation">)</span>
<span class="token comment">// true</span>
Number<span class="token punctuation">.</span><span class="token constant">EPSILON</span>
<span class="token comment">// 2.220446049250313e-16</span>
Number<span class="token punctuation">.</span><span class="token constant">EPSILON</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>
<span class="token comment">// &quot;0.00000000000000022204&quot;</span>
</code></pre></div><h3 id="_6-6-安全整数和-number-issafeinteger"><a href="#_6-6-安全整数和-number-issafeinteger" class="header-anchor">#</a> 6.6. 安全整数和 Number.isSafeInteger()</h3> <blockquote><p>用来判断一个整数是否落在<code>安全范围</code></p> <p><code>安全范围</code>：<code>Number.MAX_SAFE_INTEGER</code>和<code>Number.MIN_SAFE_INTEGER</code>这两个常量，用来表示这个范围的上下限</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code>Number<span class="token punctuation">.</span><span class="token function-variable function">isSafeInteger</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> n <span class="token operator">===</span> <span class="token string">'number'</span> <span class="token operator">&amp;&amp;</span>
    Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token operator">===</span> n <span class="token operator">&amp;&amp;</span>
    Number<span class="token punctuation">.</span><span class="token constant">MIN_SAFE_INTEGER</span> <span class="token operator">&lt;=</span> n <span class="token operator">&amp;&amp;</span>
    n <span class="token operator">&lt;=</span> Number<span class="token punctuation">.</span><span class="token constant">MAX_SAFE_INTEGER</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//实际使用这个函数时，需要注意。验证运算结果是否落在安全整数的范围内，不要只验证运算结果，而要同时验证参与运算的每个值</span>
</code></pre></div><h3 id="_6-7-math对象的扩展"><a href="#_6-7-math对象的扩展" class="header-anchor">#</a> 6.7. Math对象的扩展</h3> <h3 id="_6-7-1-math-trunc"><a href="#_6-7-1-math-trunc" class="header-anchor">#</a> 6.7.1. Math.trunc()</h3> <blockquote><p>去除一个数的小数部分，返回整数部分</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code>Math<span class="token punctuation">.</span><span class="token function">trunc</span><span class="token punctuation">(</span><span class="token number">4.1</span><span class="token punctuation">)</span> <span class="token comment">// 4</span>
Math<span class="token punctuation">.</span><span class="token function">trunc</span><span class="token punctuation">(</span><span class="token number">4.9</span><span class="token punctuation">)</span> <span class="token comment">// 4</span>
Math<span class="token punctuation">.</span><span class="token function">trunc</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">4.1</span><span class="token punctuation">)</span> <span class="token comment">// -4</span>
Math<span class="token punctuation">.</span><span class="token function">trunc</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">4.9</span><span class="token punctuation">)</span> <span class="token comment">// -4</span>
Math<span class="token punctuation">.</span><span class="token function">trunc</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">0.1234</span><span class="token punctuation">)</span> <span class="token comment">// -0</span>
</code></pre></div><ul><li>对于非<strong>数值</strong>，会先调用<code>Number()</code>转为数值</li> <li>对于空值和无法截取整数的值，返回<code>NaN</code></li></ul> <h3 id="_6-7-2-math-sign"><a href="#_6-7-2-math-sign" class="header-anchor">#</a> 6.7.2. Math.sign()</h3> <blockquote><p>判断一个数是：正数、负数、还是零。</p> <p>对于非数值，先转为数值再判断【如果不能转换的，返回NaN】</p></blockquote> <p>有五种返回值：</p> <ul><li>参数为正数，返回<code>+1</code>；</li> <li>参数为负数，返回<code>-1</code>；</li> <li>参数为 0，返回<code>0</code>；</li> <li>参数为-0，返回<code>-0</code>;</li> <li>其他值，返回<code>NaN</code>。</li></ul> <h3 id="_6-7-3-math-cbrt"><a href="#_6-7-3-math-cbrt" class="header-anchor">#</a> 6.7.3. Math.cbrt()</h3> <blockquote><p>计算一个数的立方根</p> <p>非数值，内部先用<code>Number()</code>转为数值</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code>Math<span class="token punctuation">.</span><span class="token function">cbrt</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// -1</span>
Math<span class="token punctuation">.</span><span class="token function">cbrt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>  <span class="token comment">// 0</span>
Math<span class="token punctuation">.</span><span class="token function">cbrt</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>  <span class="token comment">// 1</span>
Math<span class="token punctuation">.</span><span class="token function">cbrt</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>  <span class="token comment">// 1.2599210498948732</span>

Math<span class="token punctuation">.</span><span class="token function">cbrt</span><span class="token punctuation">(</span><span class="token string">'8'</span><span class="token punctuation">)</span> <span class="token comment">// 2</span>
Math<span class="token punctuation">.</span><span class="token function">cbrt</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">)</span> <span class="token comment">// NaN</span>
</code></pre></div><h3 id="_6-8-指数运算符"><a href="#_6-8-指数运算符" class="header-anchor">#</a> 6.8. 指数运算符</h3> <blockquote><p>(**)</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token number">2</span> <span class="token operator">**</span> <span class="token number">2</span> <span class="token comment">// 4</span>
<span class="token number">2</span> <span class="token operator">**</span> <span class="token number">3</span> <span class="token comment">// 8</span>
</code></pre></div><h3 id="_6-9-bigint-数据类型"><a href="#_6-9-bigint-数据类型" class="header-anchor">#</a> 6.9. BigInt 数据类型</h3> <h2 id="_7-函数的扩展"><a href="#_7-函数的扩展" class="header-anchor">#</a> 7. 函数的扩展</h2> <h3 id="_7-1-默认值"><a href="#_7-1-默认值" class="header-anchor">#</a> 7.1. 默认值</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token string">'World'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Hello'</span><span class="token punctuation">)</span> <span class="token comment">// Hello World</span>
<span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Hello'</span><span class="token punctuation">,</span> <span class="token string">'China'</span><span class="token punctuation">)</span> <span class="token comment">// Hello China</span>
<span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Hello'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token comment">// Hello</span>
</code></pre></div><ul><li>参数变量是默认声明的，因此不能用<code>let</code>和<code>const</code>再次声明</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">x <span class="token operator">=</span> <span class="token number">5</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// error</span>
  <span class="token keyword">const</span> x <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">// error</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><p>参数默认值不是传值的，而是每次都重新计算默认值表达式的值【惰性求值】</p></li> <li><p>参数默认值的位置：应该是函数的尾参数</p></li> <li><p>如果函数指定了默认值后，函数的<code>length</code>属性，返回的是<strong>没有指定默认值的参数个数</strong></p></li> <li><p><strong>作用域</strong>：设置了参数的默认值，在声明初始化时，参数会形成一个单独的作用域（context），初始化完成后会消失，并且在不设置默认值时，不会出现</p></li></ul> <h3 id="_7-2-rest参数"><a href="#_7-2-rest参数" class="header-anchor">#</a> 7.2. rest参数</h3> <blockquote><p>rest 参数（形式为<code>...变量名</code>），用于获取函数的多余参数，这样就不需要使用<code>arguments</code>对象了</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>values</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> val <span class="token keyword">of</span> values<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    sum <span class="token operator">+=</span> val<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> sum<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">// 10</span>
</code></pre></div><ul><li>rest参数之后不能再有其他参数（即只能是最后一个参数），否则会报错</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 报错</span>
<span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> <span class="token operator">...</span>b<span class="token punctuation">,</span> c</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>函数的<code>length</code>属性，不包括rest参数</li></ul> <h3 id="_7-3-严格模式"><a href="#_7-3-严格模式" class="header-anchor">#</a> 7.3. 严格模式</h3> <blockquote><p>规定只要函数参数使用了默认值、解构赋值、或者扩展运算符，那么函数内部就不能显式设定为严格模式，否则会报错。</p></blockquote> <h3 id="_7-4-name属性"><a href="#_7-4-name属性" class="header-anchor">#</a> 7.4. name属性</h3> <blockquote><p>返回函数的函数名</p></blockquote> <h3 id="_7-5-箭头函数"><a href="#_7-5-箭头函数" class="header-anchor">#</a> 7.5. 箭头函数</h3> <blockquote><p>“箭头”(=&gt;)定义函数</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> <span class="token function-variable function">sum</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">num1<span class="token punctuation">,</span> num2</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> num1 <span class="token operator">+</span> num2<span class="token punctuation">;</span> <span class="token punctuation">}</span>
</code></pre></div><p>注意：</p> <ol><li>函数体内的<code>this</code>对象，就是定义时所在的对象，而不是<strong>使用时</strong>所在的对象。</li> <li>不可以当作<strong>构造函数</strong>，也就是说，不可以使用<code>new</code>命令，否则会抛出一个错误。</li> <li>不可以使用<code>arguments</code>对象，该对象在函数体内不存在。如果要用，可以用 rest 参数代替。</li> <li>不可以使用<code>yield</code>命令，因此箭头函数不能用作 Generator 函数。</li></ol> <hr> <ul><li>箭头函数<code>this</code>指向固定化的原因：</li></ul> <blockquote><p>箭头函数根本没有自己的<code>this</code>，导致内部的<code>this</code>就是外层代码块的<code>this</code></p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// ES6</span>
<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'id:'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// ES5</span>
<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> _this <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>

  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'id:'</span><span class="token punctuation">,</span> _this<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_7-6-尾调用优化"><a href="#_7-6-尾调用优化" class="header-anchor">#</a> 7.6. 尾调用优化</h3> <blockquote><p>尾调用（Tail Call）是函数式编程的一个重要概念，是指：某个函数的最后一步是调用另一个函数</p></blockquote> <h3 id="_7-6-1-尾递归"><a href="#_7-6-1-尾递归" class="header-anchor">#</a> 7.6.1 尾递归</h3> <blockquote><p>函数调用自身，称为递归；如果尾调用自身，就称为尾递归</p></blockquote> <h3 id="_7-7-函数参数的尾逗号"><a href="#_7-7-函数参数的尾逗号" class="header-anchor">#</a> 7.7. 函数参数的尾逗号</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">clownsEverywhere</span><span class="token punctuation">(</span>
  <span class="token parameter">param1<span class="token punctuation">,</span>
  param2<span class="token punctuation">,</span></span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span>

<span class="token function">clownsEverywhere</span><span class="token punctuation">(</span>
  <span class="token string">'foo'</span><span class="token punctuation">,</span>
  <span class="token string">'bar'</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_7-8-function-prototype-tostring"><a href="#_7-8-function-prototype-tostring" class="header-anchor">#</a> 7.8. Function.prototype.toString()</h3> <blockquote><p>返回函数代码本身，以前会省略注释和空格</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token comment">/* foo comment */</span> <span class="token function">foo</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

foo<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// &quot;function /* foo comment */ foo () {}&quot;</span>
</code></pre></div><p>旧版：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token comment">/* foo comment */</span> <span class="token function">foo</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

foo<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// function foo() {}</span>
</code></pre></div><h2 id="_8-数组的扩展"><a href="#_8-数组的扩展" class="header-anchor">#</a> 8. 数组的扩展</h2> <h3 id="_8-1-扩展运算符"><a href="#_8-1-扩展运算符" class="header-anchor">#</a> 8.1. 扩展运算符</h3> <blockquote><p>扩展运算符（spread）是三个点（<code>...</code>）</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">// 1 2 3</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>
<span class="token comment">// 1 2 3 4 5</span>
</code></pre></div><h3 id="_8-1-1-替代函数的apply方法"><a href="#_8-1-1-替代函数的apply方法" class="header-anchor">#</a> 8.1.1. 替代函数的apply方法</h3> <blockquote><p>apply传递的参数，必须是数组形式</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// ES5 的写法</span>
Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">14</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">77</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment">// ES6 的写法</span>
Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">[</span><span class="token number">14</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">77</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment">// 等同于</span>
Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">14</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">77</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_8-1-2-扩展运算符的应用"><a href="#_8-1-2-扩展运算符的应用" class="header-anchor">#</a> 8.1.2. 扩展运算符的应用</h3> <ol><li><strong>复制数组</strong></li></ol> <blockquote><p>数组是复合的数据类型，直接复制的话，只是复制了指向底层数据结构的指针，而不是克隆一个全新的数组</p></blockquote> <ul><li>ES5的方法：</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> a1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> a2 <span class="token operator">=</span> a1<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

a2<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
a1 <span class="token comment">// [1, 2]</span>
</code></pre></div><ul><li>ES6</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> a1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">// 写法一</span>
<span class="token keyword">const</span> a2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>a1<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">// 写法二</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span><span class="token operator">...</span>a2<span class="token punctuation">]</span> <span class="token operator">=</span> a1<span class="token punctuation">;</span>
</code></pre></div><ol start="2"><li><strong>合并数组</strong></li></ol> <blockquote><p>都属于浅拷贝</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> arr1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> arr2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> arr3 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'d'</span><span class="token punctuation">,</span> <span class="token string">'e'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// ES5 的合并数组</span>
arr1<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>arr2<span class="token punctuation">,</span> arr3<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// [ 'a', 'b', 'c', 'd', 'e' ]</span>

<span class="token comment">// ES6 的合并数组</span>
<span class="token punctuation">[</span><span class="token operator">...</span>arr1<span class="token punctuation">,</span> <span class="token operator">...</span>arr2<span class="token punctuation">,</span> <span class="token operator">...</span>arr3<span class="token punctuation">]</span>
<span class="token comment">// [ 'a', 'b', 'c', 'd', 'e' ]</span>
</code></pre></div><ol start="3"><li><strong>与解构赋值结合</strong></li></ol> <blockquote><p>用来生成数组</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// ES5</span>
a <span class="token operator">=</span> list<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> rest <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token comment">// ES6</span>
<span class="token punctuation">[</span>a<span class="token punctuation">,</span> <span class="token operator">...</span>rest<span class="token punctuation">]</span> <span class="token operator">=</span> list
</code></pre></div><ol start="4"><li><strong>字符串</strong></li></ol> <blockquote><p>将字符串转为真正的数组</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">[</span><span class="token operator">...</span><span class="token string">'hello'</span><span class="token punctuation">]</span>
<span class="token comment">// [ &quot;h&quot;, &quot;e&quot;, &quot;l&quot;, &quot;l&quot;, &quot;o&quot; ]</span>
</code></pre></div><ol start="5"><li><strong>实现了Iterator接口的对象</strong></li></ol> <blockquote><p>用扩展运算符转为真正的数组</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> nodeList <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//querySelectorAll返回的是一个类似数组的对象</span>
<span class="token keyword">let</span> array <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>nodeList<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> arrayLike <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token string">'0'</span><span class="token operator">:</span> <span class="token string">'a'</span><span class="token punctuation">,</span>
  <span class="token string">'1'</span><span class="token operator">:</span> <span class="token string">'b'</span><span class="token punctuation">,</span>
  <span class="token string">'2'</span><span class="token operator">:</span> <span class="token string">'c'</span><span class="token punctuation">,</span>
  length<span class="token operator">:</span> <span class="token number">3</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// TypeError: Cannot spread non-iterable object.</span>
<span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>arrayLike<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">// 可以用Array.from方法，将arrayLike转为真正的数组</span>
</code></pre></div><ol start="6"><li><strong>Map和Set结构，Generator函数</strong></li></ol> <blockquote></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'one'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'two'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'three'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>map<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// [1, 2, 3]</span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">go</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">yield</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">yield</span> <span class="token number">2</span><span class="token punctuation">;</span>
  <span class="token keyword">yield</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token punctuation">[</span><span class="token operator">...</span><span class="token function">go</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token comment">// [1, 2, 3]</span>
</code></pre></div><h3 id="_8-2-array-from"><a href="#_8-2-array-from" class="header-anchor">#</a> 8.2. Array.from()</h3> <blockquote><p>用于将两类对象转为真正的数组：类似数组的对象（array-like object）和可遍历（iterable）的对象（包括 ES6 新增的数据结构 Set 和 Map）</p> <p>返回的一个<strong>浅拷贝</strong>的数组</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> arrayLike <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">'0'</span><span class="token operator">:</span> <span class="token string">'a'</span><span class="token punctuation">,</span>
    <span class="token string">'1'</span><span class="token operator">:</span> <span class="token string">'b'</span><span class="token punctuation">,</span>
    <span class="token string">'2'</span><span class="token operator">:</span> <span class="token string">'c'</span><span class="token punctuation">,</span>
    length<span class="token operator">:</span> <span class="token number">3</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// ES5的写法</span>
<span class="token keyword">var</span> arr1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arrayLike<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ['a', 'b', 'c']</span>

<span class="token comment">// ES6的写法</span>
<span class="token keyword">let</span> arr2 <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>arrayLike<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ['a', 'b', 'c']</span>
</code></pre></div><ul><li>对于没有该方法的浏览器，可以用<code>Array.prototype.slice</code>方法替代</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> toArray <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  Array<span class="token punctuation">.</span>from <span class="token operator">?</span> Array<span class="token punctuation">.</span><span class="token function-variable function">from</span> <span class="token operator">:</span> <span class="token parameter">obj</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>可以接收第二个参数，类似于数组的<code>map</code>方法，用于对每个元素进行处理</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code>Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>arrayLike<span class="token punctuation">,</span> <span class="token parameter">x</span> <span class="token operator">=&gt;</span> x <span class="token operator">*</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 等同于</span>
Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>arrayLike<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">x</span> <span class="token operator">=&gt;</span> x <span class="token operator">*</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>

Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> x <span class="token operator">*</span> x<span class="token punctuation">)</span>
<span class="token comment">// [1, 4, 9]</span>
</code></pre></div><h3 id="_8-3-array-of"><a href="#_8-3-array-of" class="header-anchor">#</a> 8.3. Array.of()</h3> <blockquote><p>将一组值，转换为数组</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code>Array<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span> <span class="token comment">// [3,11,8]</span>
Array<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">// [3]</span>
Array<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token comment">// 1</span>
</code></pre></div><ul><li><p>可以替代<code>Array()</code>或<code>new Array()</code></p></li> <li><p>返回值：数值组成的数组，如果没有参数，就返回一个空数组</p></li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//Array.of方法可以用下面的代码模拟实现。</span>
<span class="token keyword">function</span> <span class="token function">ArrayOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_8-4-数组实例的copywithin"><a href="#_8-4-数组实例的copywithin" class="header-anchor">#</a> 8.4. 数组实例的copyWithin()</h3> <blockquote><ul><li>target（必需）：从该位置开始替换数据。如果为负值，表示倒数。</li> <li>start（可选）：从该位置开始读取数据，默认为 0。如果为负值，表示从末尾开始计算。</li> <li>end（可选）：到该位置前停止读取数据，默认等于数组长度。如果为负值，表示从末尾开始计算。</li></ul> <p>返回的是当前数组，会修改当前数组</p></blockquote> <h3 id="_8-5-数组实例的find-和findindex"><a href="#_8-5-数组实例的find-和findindex" class="header-anchor">#</a> 8.5. 数组实例的find()和findIndex()</h3> <blockquote><p>find(function(value,index,arr){ })：找出第一个符合条件的数组成员，并返回第一个为true的成员的值，不符合则返回undefined</p> <p>value：当前值，index：当前的位置，arr：原数组</p></blockquote> <blockquote><p>findIndex(function(value, index, arr){ })：返回第一个符合条件的数组成员的位置，不符合则返回-1</p></blockquote> <ul><li>这两个方法都可以发现<code>NaN</code>，弥补了<code>indexOf</code>方法的不足</li></ul> <h3 id="_8-6-数组实例的fill"><a href="#_8-6-数组实例的fill" class="header-anchor">#</a> 8.6. 数组实例的fill()</h3> <blockquote><p>使用给定值，填充一个数组</p> <p>fill(arg1, arg2, arg3)：=&gt;arg1：填充的内容；arg2：填充的起始位置；arg3：结束的位置</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span>
<span class="token comment">// [7, 7, 7]</span>

<span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span>
<span class="token comment">// [7, 7, 7]</span>
</code></pre></div><h3 id="_8-7-数组实例的entries-keys-和-values"><a href="#_8-7-数组实例的entries-keys-和-values" class="header-anchor">#</a> 8.7. 数组实例的entries(), keys() 和 values()</h3> <blockquote><p>区别是</p> <p><code>keys()</code>是对键名的遍历、</p> <p><code>values()</code>是对键值的遍历，</p> <p><code>entries()</code>是对键值对的遍历</p></blockquote> <h3 id="_8-8-数组实例的includes"><a href="#_8-8-数组实例的includes" class="header-anchor">#</a> 8.8. 数组实例的includes()</h3> <blockquote><p>返回一个布尔值，表示某个数组是否包含给定的值。与字符串的<code>includes</code>类似</p></blockquote> <p>注意：</p> <p>Map 和 Set 数据结构有一个<code>has</code>方法，需要注意与<code>includes</code>区分。</p> <ul><li>Map 结构的<code>has</code>方法，是用来查找键名的，比如<code>Map.prototype.has(key)</code>、<code>WeakMap.prototype.has(key)</code>、<code>Reflect.has(target, propertyKey)</code>。</li> <li>Set 结构的<code>has</code>方法，是用来查找值的，比如<code>Set.prototype.has(value)</code>、<code>WeakSet.prototype.has(value)</code>。</li></ul> <h3 id="_8-9-数组实例的flat-flatmap"><a href="#_8-9-数组实例的flat-flatmap" class="header-anchor">#</a> 8.9. 数组实例的flat() , flatMap()</h3> <blockquote><p>flat()：用于将嵌套的数组“拉平”，变成一维的数组。该方法返回一个新数组，对原数据没有影响</p></blockquote> <ul><li>如果不管有多少层嵌套，都要转成一维数组，可以用<code>Infinity</code>关键词做参数</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">flat</span><span class="token punctuation">(</span><span class="token number">Infinity</span><span class="token punctuation">)</span>
<span class="token comment">// [1, 2, 3]</span>
</code></pre></div><blockquote><p>flatMap：先对每个成员进行map()方法，在执行flat()，返回一个新数组，不改变原数组</p> <p>该方法：只能展开一层数组</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//flatMap()方法的参数是一个遍历函数，该函数可以接受三个参数，分别是当前数组成员、当前数组成员的位置（从零开始）、原数组。</span>
<span class="token comment">//flatMap()方法还可以有第二个参数，用来绑定遍历函数里面的this。</span>
arr<span class="token punctuation">.</span><span class="token function">flatMap</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token parameter">currentValue<span class="token punctuation">[</span><span class="token punctuation">,</span> index<span class="token punctuation">[</span><span class="token punctuation">,</span> array<span class="token punctuation">]</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">[</span><span class="token punctuation">,</span> thisArg<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_8-10-数组的空位"><a href="#_8-10-数组的空位" class="header-anchor">#</a> 8.10. 数组的空位</h3> <blockquote><p>指数组的某一个位置没有任何值</p></blockquote> <p>ES5：</p> <ul><li><code>forEach()</code>, <code>filter()</code>, <code>reduce()</code>, <code>every()</code> 和<code>some()</code>都会跳过空位。</li> <li><code>map()</code>会跳过空位，但会保留这个值</li> <li><code>join()</code>和<code>toString()</code>会将空位视为<code>undefined</code>，而<code>undefined</code>和<code>null</code>会被处理成空字符串。</li></ul> <p>ES6：明确将空位转为<code>undefined</code></p> <h3 id="_8-11-array-prototype-sort-的排序稳定性"><a href="#_8-11-array-prototype-sort-的排序稳定性" class="header-anchor">#</a> 8.11. Array.prototype.sort()的排序稳定性</h3> <blockquote><p>指的是：排序关键字相同的项目，排序前后的顺序不变</p></blockquote> <h2 id="_9-对象的扩展"><a href="#_9-对象的扩展" class="header-anchor">#</a> 9. 对象的扩展</h2> <h3 id="_9-1-属性的简洁表示法"><a href="#_9-1-属性的简洁表示法" class="header-anchor">#</a> 9.1. 属性的简洁表示法</h3> <blockquote><p>简写的对象方法不能用作 <strong>构造函数</strong></p></blockquote> <h3 id="_9-2-属性名表达式"><a href="#_9-2-属性名表达式" class="header-anchor">#</a> 9.2. 属性名表达式</h3> <blockquote></blockquote> <h3 id="_9-3-方法的-name-属性"><a href="#_9-3-方法的-name-属性" class="header-anchor">#</a> 9.3. 方法的 <code>name</code> 属性</h3> <blockquote><p>函数的 <code>name</code> 属性，返回函数名</p></blockquote> <ol><li><p>普通方法</p> <ul><li>返回值： <code>函数名</code> （即方法名）</li></ul></li> <li><p>使用了，取值函数 <code>getters</code> 和存值函数 <code>setter</code></p> <ul><li>返回值：<code>get</code> / <code>set</code> + <code>函数名</code></li></ul></li> <li><p>使用 <code>bind</code> 创造的函数</p> <ul><li>返回值： <code>bound</code> + <code>原函数的名字</code></li></ul></li> <li><p>使用 <code>Function</code> 构造函数创造的函数</p> <ul><li>返回值： <code>anonymous</code> （匿名的）</li></ul></li> <li><p>方法是一个 <code>Symbol</code> 值</p> <ul><li><p>返回值： <code>Symbol</code> 值的描述</p></li> <li><div class="language-JS extra-class"><pre class="language-js"><code><span class="token keyword">const</span> key1 <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'description'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> key2 <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>key1<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span>key2<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
obj<span class="token punctuation">[</span>key1<span class="token punctuation">]</span><span class="token punctuation">.</span>name <span class="token comment">// &quot;[description]&quot;</span>
obj<span class="token punctuation">[</span>key2<span class="token punctuation">]</span><span class="token punctuation">.</span>name <span class="token comment">// &quot;&quot;</span>
</code></pre></div></li></ul></li></ol> <h3 id="_9-4-属性的-可枚举性-和-遍历"><a href="#_9-4-属性的-可枚举性-和-遍历" class="header-anchor">#</a> 9.4. 属性的 <code>可枚举性</code> 和 <code>遍历</code></h3> <ol><li>可枚举性（enumerable）</li></ol> <blockquote><p>对象的每个属性都有一个描述对象（Descriptor），用来控制该属性的行为。   <code>Object.getOwnPropertyDescriptor</code>  方法可以获取该属性的描述对象。</p></blockquote> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> foo<span class="token operator">:</span> <span class="token number">123</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">'foo'</span><span class="token punctuation">)</span>
<span class="token comment">//  {</span>
<span class="token comment">//    value: 123,</span>
<span class="token comment">//    writable: true,</span>
<span class="token comment">//    enumerable: true,</span>
<span class="token comment">//    configurable: true</span>
<span class="token comment">//  }</span>
</code></pre></div><blockquote><p>有四个操作会忽略 <code>enumerable</code> 为 <code>false</code> 的属性（即只枚举可被枚举的属性）</p> <ul><li><code>for...in</code> ：只遍历 <code>对象自身</code> 和 <code>继承</code> 的可枚举的属性</li> <li><code>Object.keys()</code> ：返回对象自身的所有可枚举的 <code>属性</code> 和 <code>键名</code></li> <li><code>JSON.stringify()</code> ：只 <code>串行化</code> 对象自身的可枚举的属性</li> <li><code>Object.assign()</code> ：忽略 <code>enumerable</code> 为 <code>false</code> 的属性，只拷贝可枚举的属性【ES6新增方法】</li></ul></blockquote> <ol start="2"><li>遍历</li></ol> <blockquote><p>ES6 共有 五 种可遍历对象属性的方法</p></blockquote> <ul><li><code>for...in</code></li></ul> <blockquote><p>循环遍历对象自身的和继承的可枚举属性（不含 Symbol 属性）</p></blockquote> <ul><li><code>Object.keys(obj)</code></li></ul> <blockquote><p>返回一个数组，包括对象自身的（不含继承的）所有可枚举属性（不含 Symbol 属性）的键名</p></blockquote> <ul><li><code>Object.getOwnPropertyNames(obj)</code></li></ul> <blockquote><p>返回一个数组，包含对象自身的所有属性（不含 Symbol 属性，但是包括不可枚举属性）的键名</p></blockquote> <ul><li><code>Object.getOwnPropertySymbols(obj)</code></li></ul> <blockquote><p>返回一个数组，包含对象自身的所有 Symbol 属性的键名</p></blockquote> <ul><li><code>Reflect.ownKeys(obj)</code></li></ul> <blockquote><p>返回一个数组，包含对象自身的（不含继承的）所有键名，不管键名是 Symbol 或字符串，也不管是否可枚举</p></blockquote> <ol start="3"><li>遍历规则
<ul><li><strong>首先</strong> 遍历所有 <strong>数值键</strong> ，按照 <strong>数值</strong> 升序排列</li> <li><strong>其次</strong> 遍历所有 <strong>字符串键</strong> ，按照 <strong>加入时间</strong> 升序排列</li> <li><strong>最后</strong> 遍历所有 <strong>Symbol键</strong> ，按照 <strong>加入时间</strong> 升序排列</li></ul></li></ol> <h3 id="_9-5-super-关键字"><a href="#_9-5-super-关键字" class="header-anchor">#</a> 9.5. <code>super</code> 关键字</h3> <blockquote><p>指向当前对象的 <strong>原型对象</strong></p> <p><code>super.foo</code> 等同于 <code>Object.getPrototypeOf(this).foo</code> （属性）或  <code>Object.getPrototypeOf(this).foo.call(this)</code> （方法）</p></blockquote> <h3 id="_9-6-对象的扩展运算符"><a href="#_9-6-对象的扩展运算符" class="header-anchor">#</a> 9.6. 对象的扩展运算符</h3> <ol><li>解构赋值</li></ol> <blockquote><p>将目标对象所有 可遍历、但尚未读取的属性，都拷贝到新对象上</p></blockquote> <ul><li>注意</li></ul> <blockquote><p>解构赋值：是浅拷贝。</p> <p>如果一个键的值是 <strong>复合类型</strong> 的值（数组、对象、函数），在拷贝的时候，是引用</p></blockquote> <ol start="2"><li>扩展运算符</li></ol> <blockquote><p>对象的扩展运算符等同于使用<code>Object.assign()</code>方法</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> aClone <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span>a <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 等同于</span>
<span class="token keyword">let</span> aClone <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ol start="3"><li>链判断运算符</li></ol> <blockquote><p>有三种用法</p> <ul><li><code>obj?.prop</code> —— 对象属性</li> <li><code>obj?.[expr]</code> —— 对象属性</li> <li><code>func?.(..args)</code> ——函数或对象方法的效用</li></ul></blockquote> <ul><li><p>注意点：</p> <ol><li><strong>短路机制</strong> ：<code>?.</code></li></ol> <blockquote><p>只要不满足条件，就不再往下执行</p></blockquote> <div class="language-JS extra-class"><pre class="language-js"><code>a<span class="token operator">?.</span><span class="token punctuation">[</span><span class="token operator">++</span>x<span class="token punctuation">]</span>
<span class="token comment">// 等同于</span>
a <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token keyword">undefined</span> <span class="token operator">:</span> a<span class="token punctuation">[</span><span class="token operator">++</span>x<span class="token punctuation">]</span>
<span class="token comment">//链判断运算符一旦为真，右侧的表达式就不再求值</span>
</code></pre></div><ol start="2"><li><code>delete</code> 运算符</li></ol> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token keyword">delete</span> a<span class="token operator">?.</span>b
<span class="token comment">// 等同于</span>
a <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token keyword">undefined</span> <span class="token operator">:</span> <span class="token keyword">delete</span> a<span class="token punctuation">.</span>b
</code></pre></div><ol start="3"><li><p>括号的影响</p> <blockquote><p>一般来说，使用<code>?.</code>运算符的场合，不应该使用圆括号</p></blockquote> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token punctuation">(</span>a<span class="token operator">?.</span>b<span class="token punctuation">)</span><span class="token punctuation">.</span>c
<span class="token comment">// 等价于</span>
<span class="token punctuation">(</span>a <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token keyword">undefined</span> <span class="token operator">:</span> a<span class="token punctuation">.</span>b<span class="token punctuation">)</span><span class="token punctuation">.</span>c
</code></pre></div></li> <li><p>右侧不得为十进制数值</p></li></ol></li></ul> <h3 id="_9-7-null-判断运算符"><a href="#_9-7-null-判断运算符" class="header-anchor">#</a> 9.7. <code>Null</code> 判断运算符</h3> <ul><li>旧方法</li></ul> <blockquote><p>如果某个属性的值是 <code>null</code> 或 <code>undefined</code> ，可以通过 <code>||</code> 运算符指定默认值</p> <p>缺陷：属性的值如果为空字符串或<code>false</code>或<code>0</code>，默认值也会生效</p></blockquote> <ul><li>新方法</li></ul> <blockquote><p>符号： <code>??</code></p> <p>只有运算符左侧的值为<code>null</code>或<code>undefined</code>时，才会返回右侧的值</p></blockquote> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token keyword">const</span> headerText <span class="token operator">=</span> response<span class="token punctuation">.</span>settings<span class="token punctuation">.</span>headerText <span class="token operator">??</span> <span class="token string">'Hello, world!'</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>优先级</li></ul> <blockquote><p>如果多个逻辑运算符一起使用，必须用 <strong>括号</strong> 表明优先级，否则会报错</p></blockquote> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token punctuation">(</span>lhs <span class="token operator">&amp;&amp;</span> middle<span class="token punctuation">)</span> <span class="token operator">??</span> rhs<span class="token punctuation">;</span>
lhs <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>middle <span class="token operator">??</span> rhs<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="_10-对象新增的方法"><a href="#_10-对象新增的方法" class="header-anchor">#</a> 10. 对象新增的方法</h2> <h3 id="_10-1-object-is"><a href="#_10-1-object-is" class="header-anchor">#</a> 10.1. <code>Object.is()</code></h3> <blockquote><p>ES5比较两个值方法：相等运算符(<code>==</code>) 和 严格相等运算符(<code>===</code>)</p> <p>缺点：前者会 <strong>自动转换数据类型</strong> ；后者的 <code>NaN</code> 不等于自身，以及 <code>+0</code> 等于 <code>-0</code></p></blockquote> <blockquote><p>ES6新方法：<code>Object.is()</code> 用法跟严格相等运算符 基本一致</p></blockquote> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token comment">//不同之处</span>
<span class="token operator">+</span><span class="token number">0</span> <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">0</span> <span class="token comment">//true</span>
<span class="token number">NaN</span> <span class="token operator">===</span> <span class="token number">NaN</span> <span class="token comment">// false</span>

Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token operator">+</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token number">NaN</span><span class="token punctuation">,</span> <span class="token number">NaN</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
</code></pre></div><blockquote><p>用ES5来构造一个 <code>Object.is()</code> 方法</p></blockquote> <div class="language-JS extra-class"><pre class="language-js"><code>Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>Object<span class="token punctuation">,</span> <span class="token string">'is'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">===</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 针对+0 不等于 -0的情况</span>
      <span class="token keyword">return</span> x <span class="token operator">!==</span> <span class="token number">0</span> <span class="token operator">||</span> <span class="token number">1</span> <span class="token operator">/</span> x <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">/</span> y<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 针对NaN的情况</span>
    <span class="token keyword">return</span> x <span class="token operator">!==</span> x <span class="token operator">&amp;&amp;</span> y <span class="token operator">!==</span> y<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  configurable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  enumerable<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  writable<span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_10-2-object-assign"><a href="#_10-2-object-assign" class="header-anchor">#</a> 10.2. <code>Object.assign()</code></h3> <blockquote><p>方法用于对象的合并，将源对象（source）的所有 <strong>可枚举</strong> 属性，复制到目标对象（target）</p></blockquote> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token comment">//属性名为 Symbol 值的属性，也会被Object.assign()拷贝。</span>
Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token string">'b'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span><span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'c'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token string">'d'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// { a: 'b', Symbol(c): 'd' }</span>
</code></pre></div><ul><li><p>注意：</p> <ol><li><p>浅拷贝</p> <blockquote><p>拷贝的属性值是 <strong>对象</strong> ，那么拷贝的是保存值的 <strong>内存地址</strong> （即 <strong>引用</strong> ）</p></blockquote></li> <li><p>同名属性的替换</p> <blockquote><p>遇到同名属性，处理方法是 <strong>替换</strong> ，而不是添加</p></blockquote></li> <li><p>数组的处理</p> <blockquote><p>把数组视为 <strong>对象</strong></p></blockquote> <div class="language-JS extra-class"><pre class="language-js"><code>Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">// [4, 5, 3]</span>
<span class="token comment">// 把数组视为属性名为 0、1、2 的对象，</span>
<span class="token comment">// 因此源数组的 0 号属性4覆盖了目标数组的 0 号属性1</span>
</code></pre></div></li> <li><p>取值函数的处理</p> <blockquote><p>复制的值是一个 <code>取值函数</code> ，那么会将 <code>值</code> 求出后再复制</p></blockquote> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token keyword">const</span> source <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">get</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token number">1</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> target <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> source<span class="token punctuation">)</span>
<span class="token comment">// { foo: 1 }</span>
</code></pre></div></li></ol></li> <li><p>常见用途</p> <ol><li><p>给对象添加属性</p> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Point</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>x<span class="token punctuation">,</span> y<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 将x属性和y属性添加到Point类的对象实例</span>
</code></pre></div></li> <li><p>给对象添加方法</p> <div class="language-JS extra-class"><pre class="language-js"><code>Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token class-name">SomeClass</span><span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function">someMethod</span><span class="token punctuation">(</span><span class="token parameter">arg1<span class="token punctuation">,</span> arg2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>···<span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">anotherMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>···<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 等同于下面的写法</span>
<span class="token class-name">SomeClass</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">someMethod</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">arg1<span class="token punctuation">,</span> arg2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>···<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name">SomeClass</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">anotherMethod</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>···<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// </span>
</code></pre></div></li> <li><p>克隆对象</p> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">clone</span><span class="token punctuation">(</span><span class="token parameter">origin</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> origin<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 只能克隆原始对象自身的值，不能克隆它继承的值</span>
</code></pre></div><div class="language-JS extra-class"><pre class="language-js"><code><span class="token comment">// 此方法可以保持继承链</span>
<span class="token keyword">function</span> <span class="token function">clone</span><span class="token punctuation">(</span><span class="token parameter">origin</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> originProto <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>origin<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>originProto<span class="token punctuation">)</span><span class="token punctuation">,</span> origin<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>合并多个对象</p> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">merge</span> <span class="token operator">=</span><span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> <span class="token operator">...</span>sources</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> <span class="token operator">...</span>sources<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-JS extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">merge</span> <span class="token operator">=</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>sources</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token operator">...</span>sources<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>为属性指定默认值</p> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token constant">DEFAULTS</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  logLevel<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  outputFormat<span class="token operator">:</span> <span class="token string">'html'</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">processContent</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  options <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token constant">DEFAULTS</span><span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// --------------------------------------</span>
<span class="token keyword">const</span> <span class="token constant">DEFAULTS</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  url<span class="token operator">:</span> <span class="token punctuation">{</span>
    host<span class="token operator">:</span> <span class="token string">'example.com'</span><span class="token punctuation">,</span>
    port<span class="token operator">:</span> <span class="token number">7070</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">processContent</span><span class="token punctuation">(</span><span class="token punctuation">{</span> url<span class="token operator">:</span> <span class="token punctuation">{</span>port<span class="token operator">:</span> <span class="token number">8000</span><span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// { url: {port: 8000} }</span>
</code></pre></div></li></ol></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.294fffad.js" defer></script><script src="/assets/js/2.f1532a20.js" defer></script><script src="/assets/js/9.658a7c7e.js" defer></script>
  </body>
</html>
